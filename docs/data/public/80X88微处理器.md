## 暂停CPU内部结构 

### 1.总线接口部件(BIU)

功能：负责与存储器，I/O端口传送数据，即BIU管理在存储器中存取程序和数据的实际处理功能。

#### 1. 4个段地址寄存器

CS --- 16位代码段寄存器

DS --- 16位数据段寄存器

ES --- 16位附加段寄存器

SS --- 16位堆栈段寄存器

#### 2. 16位指令指针寄存器IP

用以存放预取指令的偏移地址。

CPU取指令总是以CS为段基址，以IP为段内偏移地址。

#### 3. 20位的地址加法器

可用20位地址寻址1M字节的内存空间。

物理地址 = 段地址 * 16 + 偏移地址

#### 4. 4/6(88/86)字节的指令队列

pass

### 2.执行部件(EU)

功能：负责指令的执行。将指令译码并利用内部的寄存器和ALU对数据进行所需的处理。

#### 1. 4个通用寄存器

特点：既可以作为16位寄存器，也可以作为8位寄存器。例：AX: AH, AL。

AX 累加器：常用于来存放算术逻辑运算中的操作数。

BX 基址寄存器：常用来存放访问内存时的基地址。

CX 计数寄存器：在循环和串操作指令中用作计数器。

DX 数据寄存器：在寄存器间接寻址的I/O指令中存放I/O端口的地址。

#### 2. 4个专用寄存器

BP 基数指针寄存器：常用来存放访问内存时的基地址。

SP 堆栈指针寄存器：在堆栈操作中用来存放栈顶偏移地址，永远指向堆栈的栈顶。

SI 源变址寄存器：

DI 目的变址寄存器：在变址寻址方式中作为索引指针。

#### 3. 标志寄存器(FR)，共16位，其中7位未用

#### 两类

状态标志 --- 操作在执行后，决定算术逻辑部件ALU处在和何种状态，这种状态会影响后面的操作。

控制状态 --- 人为设置的，指令系统中有专门的指令用于控制标志的设置和清除，每个控制标志都对每一种特定的功能起控制作用。

#### 状态

SF 符号标志

ZF 零标志

PF 奇偶标志

CF 进位标志

AF 辅助进位标志

OF 溢出标志

#### 控制

DF 方向标志：DF=0 增地址   DF=1 减地址

IF 中断标志：IF=0 不能对可屏蔽中断请求作出响应 

TF 跟踪标志

#### 4.算术逻辑部件(ALU)

加法器是算术逻辑的主要部件，绝大部分指令的执行都由加法器来完成。


![8086/8088引脚图](/media/image/e1faceebbba1b03fb7a6554e12d27c98.jpg)
## 8088CPU外部引线 

#### 最小模式

(1) A~16~ ~ A~19~/S~3~ ~ S~6~: 地址，状态复用的引脚

S~6~恒等于用0

S~5~指示中断允许标志IF的状态

S~4~,S~3~的组合指示CPU当前正在使用的段寄存器

S~4~ S~3~ 00 --- ES  01 --- SS 10 --- CS或未使用任何段寄存器  11 --- DS

(2) A~8~ ~ A~15~ ：8位地址信号

(3) AD~0~ ~ AD~7~：地址，数据分时复用的双向信号线。

(4) $IO/\overline M$：输入/输出/存储器控制信号
$\overline{IO}/ M$(8086)
$IO/\overline M$(8088)

低电平：访问存储器。

高电平：访问I/O端口

(5) $\overline{WR}$：写信号输出

(6) $DT/\overline R$：数据传输方向控制信号

低电平：CPU从存储器或I/O接口接收数据。

高电平：CPU向存储器或I/O接口发送数据。

(7) $\overline{DEN}$ 数据允许信号

表示数据总线上具有有效数据

常用作数据总线驱动器的片选信号。

(8) ALE 地址锁存信号

表明CPU地址线上有有效地址

(9) $\overline{RD}$ 读选通信号

表示CPU正对存储器或I/O接口进行读操作。

(10) READY外部同步控制输入信号

由被访问的内存或I/O设备所发出的响应信号。

当READY为低电平时，CPU在T~3~ 周期采样READY信号，若其为低，CPU自动插入等待周期T~W~ (1个或多个)，直到READY变为高电平。

(11) INTR：可屏蔽中断请求输入信号，高电平有效，CPU在每条指令的最后一个周期采样该信号。

(12) $\overline{TEST}$：测试信号输入引脚，低电平有效。当当CPU执行WAIT指令时，每隔5个时钟周期对此引脚进行一次测试，若为高电平，CPU则处于空转状态进行等待；当该引脚变为低电平时，CPU结束等待状态，继续执行下一条指令。

(13) NMI：非屏蔽中断请求输入信号，上升沿触发。CPU在当前指令执行结束后就进入中断过程。

(14) RESET系统复位输入信号，该信号至少在4个时钟周期内保持有效。

复位后：

CS: FFFFH

DS、SS、ES、IP、FLAGS、其余寄存器：0000H

指令队列：空

(15) $\overline{INTA}$ 中断响应信号输出，CPU对中断请求信号INTR的响应，需要连续输出两个负脉冲用在外部中断源的中断向量码的选通信号。

(16) HOLD：总线保持请求信号输入，当一总线主控设备要占用系统总线时，通过该引脚提出请求

(17) HLDA：总线保持请求信号输入，当CPU检测到HOLD信号变低后，就立即使HLDA变低，同时恢复对总线的控制。

(18) $\overline{SS_0}$ :系统状态信号输出。

| IO/$\overline M$ | DT/$\overline R$ | $\overline{SS_0}$ | 操作             | IO/$\overline M$ | DT/$\overline R$ | $\overline{SS_0}$ |操作|
| ---------------- | ---------------- | ----------------- | ---------------- | ---------------- | ---------------- | ---------------- | ---------------- |
| 1                | 0                | 0                 | 发出中断响应信号 | 0                | 0                |0|取指令|
| 1                | 0                | 1                 | 读I/O端口        | 0 | 0 |1|读内存|
| 1 | 1 | 0 | 写I/O端口 | 0 | 1 |0|写内存|
| 1 | 1 | 1 | 暂停 | 0 | 1 |1|无作用|

(19) CLK时钟信号输入引脚

(20) V~cc~ 5V电源输入引脚

(21) GND：地线

#### 最大模式

$\overline{RD}$ 引脚不再使用

(1) $\overline S_2$ 、$\overline S_1$、$\overline S_0$总线周期状态信号

| $\overline S_2$ | $\overline S_1$ | $\overline S_0$ | 操作             | $\overline S_2$ | $\overline S_1$ | $\overline S_0$ | 操作     |
| --------------- | --------------- | --------------- | ---------------- | --------------- | --------------- | --------------- | -------- |
| 0               | 0               | 0               | 发出中断响应信号 | 1               | 0               | 0               | 取指令   |
| 0               | 0               | 1               | 读I/O端口        | 1               | 0               | 1               | 读存储器 |
| 0               | 1               | 0               | 写I/O端口        | 1               | 1               | 0               | 写存储器 |
| 0               | 1               | 1               | 暂停             | 1               | 1               | 1               | 无作用   |

(2) $\overline{RQ}/\overline{GT_1}$、$\overline{RQ}/\overline{GT_0}$ ：总线请求/总线响应信号引脚

双向功能，即是总线请求输入也是总线响应输出

$\overline{RQ}/\overline{GT_0}$比$\overline{RQ}/\overline{GT_1}$优先级高 

CPU检测到总线请求信号后，在下一个T~4~ 或T~1~ 期间，在送出总线响应信号(一个时钟周期宽的负脉冲)，

从下一个时钟周期开始，CPU释放总线。用完后，在产生一个信号，CPU检测到信号后，从下一个时钟周期开始重新控制总线。

(3) $\overline{LOCK}$：总线封锁信号输出

有效时，不允许其他总线控制设备申请使用系统总线。

由前缀指令LOCK产生，LOCK指令后面的一条指令执行完后，该信号失效

(4) QS~1~ 、QS~0~ :指令队列状态输出。可以跟踪CPU内部的指令队列

| QS~1~ | QS~0~ | 操作                     | QS~1~ | QS~0~ | 操作                     |
| ----- | ----- | ------------------------ | ----- | ----- | ------------------------ |
| 0     | 0     | 无操作                   | 1     | 0     | 队列空                   |
| 0     | 1     | 队列中操作码的第一个字节 | 1     | 1     | 队列中非第一个操作码字节 |

(5) HIGH：在最大模式下时钟为高电平输出
